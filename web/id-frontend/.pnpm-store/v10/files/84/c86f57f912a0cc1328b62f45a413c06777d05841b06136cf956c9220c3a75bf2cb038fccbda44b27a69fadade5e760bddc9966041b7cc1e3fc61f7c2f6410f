{"version":3,"file":"SelectFilter.js","sourceRoot":"../../../../../../src","sources":["components/Select/components/SelectFilter/SelectFilter.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;AAEb,qDAA+B;AAE/B,yDAA4C;AAC5C,6CAAwC;AACxC,kDAAyC;AACzC,uEAA8B;AAI9B,8BAA6B;AAE7B,MAAM,CAAC,GAAG,IAAA,UAAK,EAAC,eAAe,CAAC,CAAC;AAajC,MAAM,KAAK,GAAG;IACV,OAAO,EAAE,WAAW;CACvB,CAAC;AAEW,QAAA,YAAY,GAAG,KAAK,CAAC,UAAU,CAAqC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;IAC5F,MAAM,EAAC,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,OAAO,EAAE,WAAW,EAAC,GACrF,KAAK,CAAC;IACV,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAmB,IAAI,CAAC,CAAC;IAEtD,KAAK,CAAC,mBAAmB,CACrB,GAAG,EACH,GAAG,EAAE,CAAC,CAAC;QACH,KAAK,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,EAAC,aAAa,EAAE,IAAI,EAAC,CAAC;KAC9D,CAAC,EACF,EAAE,CACL,CAAC;IAEF,MAAM,EAAC,CAAC,EAAC,GAAG,cAAI,CAAC,cAAc,EAAE,CAAC;IAElC,MAAM,UAAU,GAA2B;QACvC,KAAK;QACL,WAAW;QACX,IAAI,EAAE,CAAC;QACP,SAAS;QACT,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE;YACZ,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC7B,CAAC;QACD,YAAY,EAAE,CAAC,CAAC,cAAc,CAAC;QAC/B,eAAe,EAAE,OAAO;QACxB,uBAAuB,EACnB,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,OAAO,SAAS,WAAW,EAAE;KAC/E,CAAC;IAEF,IAAI,YAAY,EAAE,CAAC;QACf,OAAO,YAAY,CAAC,EAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,EAAC,CAAC,CAAC;IACxF,CAAC;IAED,OAAO,CACH,gCAAK,SAAS,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,YAC7B,uBAAC,oBAAS,IACN,UAAU,EAAE,QAAQ,EACpB,YAAY,EAAE;gBACV,SAAS,EAAE,CAAC,CAAC,OAAO,CAAC;gBACrB,IAAI,EAAE,CAAC;gBACP,YAAY,EAAE,UAAU,CAAC,YAAY,CAAC;gBACtC,eAAe,EAAE,UAAU,CAAC,eAAe,CAAC;gBAC5C,uBAAuB,EAAE,UAAU,CAAC,uBAAuB,CAAC;aAC/D,EACD,IAAI,EAAE,IAAI,EACV,KAAK,EAAE,KAAK,EACZ,WAAW,EAAE,WAAW,EACxB,QAAQ,EAAE,QAAQ,EAClB,SAAS,EAAE,SAAS,EACpB,EAAE,EAAE,oBAAQ,CAAC,YAAY,GAC3B,GACA,CACT,CAAC;AACN,CAAC,CAAC,CAAC;AAEH,oBAAY,CAAC,WAAW,GAAG,cAAc,CAAC","sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport {TextInput} from '../../../controls';\nimport {block} from '../../../utils/cn';\nimport {SelectQa} from '../../constants';\nimport i18n from '../../i18n';\nimport type {SelectFilterInputProps, SelectProps} from '../../types';\nimport type {SelectFilterRef} from '../../types-misc';\n\nimport './SelectFilter.scss';\n\nconst b = block('select-filter');\n\ntype SelectFilterProps = {\n    onChange: (filter: string) => void;\n    onKeyDown: (e: React.KeyboardEvent<HTMLElement>) => void;\n    renderFilter?: SelectProps['renderFilter'];\n    size: NonNullable<SelectProps['size']>;\n    value: string;\n    placeholder?: string;\n    popupId: string;\n    activeIndex?: number;\n};\n\nconst style = {\n    padding: '4px 4px 0',\n};\n\nexport const SelectFilter = React.forwardRef<SelectFilterRef, SelectFilterProps>((props, ref) => {\n    const {onChange, onKeyDown, renderFilter, size, value, placeholder, popupId, activeIndex} =\n        props;\n    const inputRef = React.useRef<HTMLInputElement>(null);\n\n    React.useImperativeHandle(\n        ref,\n        () => ({\n            focus: () => inputRef.current?.focus({preventScroll: true}),\n        }),\n        [],\n    );\n\n    const {t} = i18n.useTranslation();\n\n    const inputProps: SelectFilterInputProps = {\n        value,\n        placeholder,\n        size: 1,\n        onKeyDown,\n        onChange: (e) => {\n            onChange(e.target.value);\n        },\n        'aria-label': t('label_filter'),\n        'aria-controls': popupId,\n        'aria-activedescendant':\n            activeIndex === undefined ? undefined : `${popupId}-item-${activeIndex}`,\n    };\n\n    if (renderFilter) {\n        return renderFilter({onChange, onKeyDown, value, ref: inputRef, style, inputProps});\n    }\n\n    return (\n        <div className={b()} style={style}>\n            <TextInput\n                controlRef={inputRef}\n                controlProps={{\n                    className: b('input'),\n                    size: 1,\n                    'aria-label': inputProps['aria-label'],\n                    'aria-controls': inputProps['aria-controls'],\n                    'aria-activedescendant': inputProps['aria-activedescendant'],\n                }}\n                size={size}\n                value={value}\n                placeholder={placeholder}\n                onUpdate={onChange}\n                onKeyDown={onKeyDown}\n                qa={SelectQa.FILTER_INPUT}\n            />\n        </div>\n    );\n});\n\nSelectFilter.displayName = 'SelectFilter';\n"]}