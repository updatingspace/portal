{"version":3,"file":"color.js","sourceRoot":"../../../../src","sources":["hooks/useColorGenerator/color.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,YAAY,EAAE,gBAAgB,EAAC,uBAAoB;AAC3D,OAAO,EAAC,eAAe,EAAE,OAAO,EAAE,MAAM,EAAE,aAAa,EAAC,wBAAqB;AAG7E,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,OAAe,EAAU,EAAE;IACpD,IAAI,OAAO,IAAI,SAAS,EAAE,CAAC;QACvB,OAAO,KAAK,GAAG,OAAO,CAAC;IAC3B,CAAC;SAAM,CAAC;QACJ,OAAO,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;IACtD,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAA4B,EAAE;IACpF,4BAA4B;IAC5B,yBAAyB;IACzB,MAAM,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;IAErC,+BAA+B;IAC/B,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACjC,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAEjC,iCAAiC;IACjC,eAAe;IACf,MAAM,EAAE,GAAG,CAAC,GAAG,YAAY,GAAG,CAAC,GAAG,YAAY,GAAG,CAAC,CAAC;IACnD,MAAM,EAAE,GAAG,CAAC,GAAG,YAAY,GAAG,CAAC,GAAG,YAAY,GAAG,CAAC,CAAC;IACnD,MAAM,EAAE,GAAG,CAAC,GAAG,YAAY,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC;IAElD,oBAAoB;IACpB,MAAM,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAC5B,MAAM,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAC5B,MAAM,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAE5B,MAAM,OAAO,GAAG,CAAC,YAAY,GAAG,MAAM,GAAG,YAAY,GAAG,MAAM,GAAG,YAAY,GAAG,MAAM,CAAC;IACvF,MAAM,OAAO,GAAG,CAAC,YAAY,GAAG,MAAM,GAAG,YAAY,GAAG,MAAM,GAAG,YAAY,GAAG,MAAM,CAAC;IACvF,MAAM,OAAO,GAAG,CAAC,YAAY,GAAG,MAAM,GAAG,YAAY,GAAG,MAAM,GAAG,WAAW,GAAG,MAAM,CAAC;IAEtF,wDAAwD;IACxD,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAChF,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAClF,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAEjF,oDAAoD;IACpD,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9B,CAAC,CAAC;AAEF,MAAM,uBAAuB,GAAG,CAC5B,IAAY,EACZ,cAAgC,EAChC,WAA6B,EACjB,EAAE;IACd,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IAC3B,MAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IAEzB,MAAM,cAAc,GAAG,eAAe,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAChD,MAAM,aAAa,GAAG,eAAe,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAE/C,MAAM,MAAM,GAAG,aAAa,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7E,MAAM,SAAS,GAAG,aAAa,CAAC,aAAa,EAAE,cAAc,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;IAErF,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,UAAU,CAAC,SAAS,GAAG,GAAG,EAAE,MAAM,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;IAE1E,OAAO;QACH,IAAI;QACJ,KAAK,EAAE;YACH,CAAC,EAAE,SAAS;YACZ,CAAC,EAAE,MAAM;YACT,CAAC,EAAE,GAAG;SACT;QACD,GAAG,EAAE;YACD,CAAC,EAAE,GAAG;YACN,CAAC,EAAE,KAAK;YACR,CAAC,EAAE,IAAI;SACV;QACD,SAAS,EAAE,OAAO,gBAAgB,GAAG;KACxC,CAAC;AACN,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,aAAa,GAAG,CAAC,EAAC,IAAI,EAAE,KAAK,EAAqB,EAAgB,EAAE;IAC7E,MAAM,EAAC,SAAS,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,EAAC,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;IAC7E,OAAO,uBAAuB,CAAC,IAAI,EAAE,cAAc,EAAE,WAAW,CAAC,CAAC;AACtE,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,EAChC,IAAI,EACJ,cAAc,EACd,WAAW,GAKd,EAAgB,EAAE;IACf,OAAO,uBAAuB,CAAC,IAAI,EAAE,cAAc,EAAE,WAAW,CAAC,CAAC;AACtE,CAAC,CAAC","sourcesContent":["import {colorOptions, textColorVarName} from './constants';\nimport {extractHashPart, getHash, getHue, normalizeHash} from './hash-utils';\nimport type {ColorDetails, GenerateColorProps} from './types';\n\nexport const linearToSrgb = (channel: number): number => {\n    if (channel <= 0.0031308) {\n        return 12.92 * channel;\n    } else {\n        return 1.055 * Math.pow(channel, 1 / 2.4) - 0.055;\n    }\n};\n\nexport const oklchToRgb = (l: number, c: number, h: number): [number, number, number] => {\n    // 1. Convert OKLCH to OKLab\n    // Convert hue to radians\n    const hRadians = (h * Math.PI) / 180;\n\n    // Calculate a and b components\n    const a = c * Math.cos(hRadians);\n    const b = c * Math.sin(hRadians);\n\n    // 2. Convert OKLab to linear RGB\n    // OKLab to LMS\n    const l_ = l + 0.3963377774 * a + 0.2158037573 * b;\n    const m_ = l - 0.1055613458 * a - 0.0638541728 * b;\n    const s_ = l - 0.0894841775 * a - 1.291485548 * b;\n\n    // LMS to linear RGB\n    const lCubed = l_ * l_ * l_;\n    const mCubed = m_ * m_ * m_;\n    const sCubed = s_ * s_ * s_;\n\n    const linearR = +4.0767416621 * lCubed - 3.3077115913 * mCubed + 0.2309699292 * sCubed;\n    const linearG = -1.2684380046 * lCubed + 2.6097574011 * mCubed - 0.3413193965 * sCubed;\n    const linearB = -0.0041960863 * lCubed - 0.7034186147 * mCubed + 1.707614701 * sCubed;\n\n    // 3. Convert linear RGB to sRGB (with gamma correction)\n    const red = Math.max(0, Math.min(255, Math.round(255 * linearToSrgb(linearR))));\n    const green = Math.max(0, Math.min(255, Math.round(255 * linearToSrgb(linearG))));\n    const blue = Math.max(0, Math.min(255, Math.round(255 * linearToSrgb(linearB))));\n\n    // Return clamped values in valid RGB range [0, 255]\n    return [red, green, blue];\n};\n\nconst generateColorFromRanges = (\n    seed: string,\n    lightnessRange: [number, number],\n    chromaRange: [number, number],\n): ColorDetails => {\n    const hash = getHash(seed);\n    const hue = getHue(hash);\n\n    const saturationHash = extractHashPart(hash, 0);\n    const lightnessHash = extractHashPart(hash, 1);\n\n    const chroma = normalizeHash(saturationHash, chromaRange[0], chromaRange[1]);\n    const lightness = normalizeHash(lightnessHash, lightnessRange[0], lightnessRange[1]);\n\n    const [red, green, blue] = oklchToRgb(lightness / 100, chroma / 100, hue);\n\n    return {\n        hash,\n        oklch: {\n            l: lightness,\n            c: chroma,\n            h: hue,\n        },\n        rgb: {\n            r: red,\n            g: green,\n            b: blue,\n        },\n        textColor: `var(${textColorVarName})`,\n    };\n};\n\nexport const generateColor = ({seed, theme}: GenerateColorProps): ColorDetails => {\n    const {lightness: lightnessRange, chroma: chromaRange} = colorOptions[theme];\n    return generateColorFromRanges(seed, lightnessRange, chromaRange);\n};\n\nexport const generateCustomColor = ({\n    seed,\n    lightnessRange,\n    chromaRange,\n}: {\n    seed: string;\n    lightnessRange: [number, number];\n    chromaRange: [number, number];\n}): ColorDetails => {\n    return generateColorFromRanges(seed, lightnessRange, chromaRange);\n};\n"]}