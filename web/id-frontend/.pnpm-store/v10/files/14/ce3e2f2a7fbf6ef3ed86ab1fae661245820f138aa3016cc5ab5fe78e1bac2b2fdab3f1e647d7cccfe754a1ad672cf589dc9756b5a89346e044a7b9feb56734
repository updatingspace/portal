{"version":3,"file":"Popover.js","sourceRoot":"../../../../src","sources":["components/Popover/Popover.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport {\n    safePolygon,\n    useClick,\n    useDismiss,\n    useFloatingRootContext,\n    useHover,\n    useInteractions,\n    useRole,\n} from '@floating-ui/react';\n\nimport {useControlledState, useForkRef} from '../../hooks';\nimport {Popup} from '../Popup';\nimport type {PopupProps} from '../Popup';\nimport type {AriaLabelingProps, DOMProps, QAProps} from '../types';\nimport {block} from '../utils/cn';\nimport {getElementRef} from '../utils/getElementRef';\n\nexport interface PopoverProps\n    extends AriaLabelingProps,\n        QAProps,\n        DOMProps,\n        Pick<\n            PopupProps,\n            | 'container'\n            | 'disablePortal'\n            | 'open'\n            | 'onOpenChange'\n            | 'strategy'\n            | 'placement'\n            | 'offset'\n            | 'keepMounted'\n            | 'hasArrow'\n            | 'modal'\n            | 'initialFocus'\n            | 'returnFocus'\n            | 'disableVisuallyHiddenDismiss'\n            | 'zIndex'\n        > {\n    children:\n        | ((props: Record<string, unknown>, ref: React.Ref<HTMLElement>) => React.ReactElement)\n        | React.ReactElement;\n    disabled?: boolean;\n    content?: React.ReactNode;\n    trigger?: 'click';\n    openDelay?: number;\n    closeDelay?: number;\n    enableSafePolygon?: boolean;\n}\n\nconst b = block('popover');\nconst DEFAULT_OPEN_DELAY = 500;\nconst DEFAULT_CLOSE_DELAY = 250;\n\nexport function Popover({\n    children,\n    open,\n    onOpenChange,\n    disabled,\n    content,\n    trigger,\n    openDelay = DEFAULT_OPEN_DELAY,\n    closeDelay = DEFAULT_CLOSE_DELAY,\n    enableSafePolygon,\n    className,\n    ...restProps\n}: PopoverProps) {\n    const [anchorElement, setAnchorElement] = React.useState<HTMLElement | null>(null);\n    const [floatingElement, setFloatingElement] = React.useState<HTMLDivElement | null>(null);\n\n    const [isOpen, setIsOpen] = useControlledState(open, false, onOpenChange);\n\n    const context = useFloatingRootContext({\n        open: isOpen && !disabled,\n        onOpenChange: setIsOpen,\n        elements: {\n            reference: anchorElement,\n            floating: floatingElement,\n        },\n    });\n\n    const isHoverEnabled = trigger !== 'click';\n\n    const hover = useHover(context, {\n        enabled: isHoverEnabled,\n        delay: {open: openDelay, close: closeDelay},\n        move: false,\n        handleClose: enableSafePolygon ? safePolygon() : undefined,\n    });\n    const click = useClick(context, {\n        ignoreMouse: isHoverEnabled,\n    });\n    const role = useRole(context, {\n        role: 'dialog',\n    });\n    const dismiss = useDismiss(context);\n\n    const interactions = [hover, click, role, dismiss];\n    const {getReferenceProps} = useInteractions(interactions);\n\n    const anchorRef = useForkRef(\n        setAnchorElement,\n        React.isValidElement(children) ? getElementRef(children) : undefined,\n    );\n    const anchorProps = React.isValidElement<any>(children)\n        ? getReferenceProps(children.props)\n        : getReferenceProps();\n    const anchorNode = React.isValidElement<any>(children)\n        ? React.cloneElement(children, {\n              ...anchorProps,\n              ref: anchorRef,\n          })\n        : children(anchorProps, anchorRef);\n\n    return (\n        <React.Fragment>\n            {anchorNode}\n            <Popup\n                {...restProps}\n                open={context.open}\n                floatingContext={context}\n                floatingRef={setFloatingElement}\n                floatingInteractions={interactions}\n                className={b(null, className)}\n            >\n                {content}\n            </Popup>\n        </React.Fragment>\n    );\n}\n"]}