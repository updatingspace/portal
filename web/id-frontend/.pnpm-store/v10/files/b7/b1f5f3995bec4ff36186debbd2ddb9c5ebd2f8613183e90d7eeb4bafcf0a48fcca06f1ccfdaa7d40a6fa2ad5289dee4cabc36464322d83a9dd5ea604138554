{"version":3,"file":"ColorDisplay.js","sourceRoot":"../../../../../../../src","sources":["components/lab/ColorPicker/components/ColorDisplay/ColorDisplay.tsx"],"names":[],"mappings":";;;;;AAAA,qDAA+B;AAE/B,kDAAkD;AAGlD,4DAA+C;AAC/C,kDAAkC;AAClC,0CAAkC;AAClC,0CAA+E;AAUlE,QAAA,YAAY,GAAG,KAAK,CAAC,UAAU,CACxC,CAAC,EAAC,IAAI,EAAE,SAAS,EAAE,IAAI,GAAG,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,aAAa,EAAC,EAAE,GAAG,EAAE,EAAE;IACpE,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAE,CACpD,IAAA,0BAAkB,EAAC,IAAI,EAAE,aAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CACjD,CAAC;IAEF,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACjB,aAAa,CAAC,IAAA,0BAAkB,EAAC,IAAI,EAAE,aAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;IAClE,CAAC,EAAE,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;IAEtB,MAAM,eAAe,GAAG,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE;QAC3C,IAAI,CAAC;YACD,MAAM,OAAO,GAAG,IAAA,sCAA8B,EAAC,UAAU,EAAE,aAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;YAEjF,aAAa,EAAE,CAAC,OAAO,CAAC,CAAC;QAC7B,CAAC;QAAC,MAAM,CAAC;YACL,aAAa,CAAC,IAAA,0BAAkB,EAAC,IAAI,EAAE,aAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;QAClE,CAAC;IACL,CAAC,EAAE,CAAC,UAAU,EAAE,SAAS,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC,CAAC;IAEjD,MAAM,MAAM,GAAG,CACX,mCACI,IAAI,EAAC,QAAQ,EACb,SAAS,EAAE,IAAA,aAAC,EAAC,cAAc,EAAE,EAAC,IAAI,EAAC,CAAC,EACpC,OAAO,EAAE,OAAO,EAChB,KAAK,EAAE,EAAC,eAAe,EAAE,IAAA,8BAAgB,EAAC,IAAI,CAAC,EAAC,GAClD,CACL,CAAC;IAEF,OAAO,CACH,gCAAK,SAAS,EAAE,IAAA,aAAC,EAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC,EAAE,GAAG,EAAE,GAAG,YAC5E,gCAAK,SAAS,EAAE,IAAA,aAAC,EAAC,iBAAiB,CAAC,YAC/B,OAAO,CAAC,CAAC,CAAC,CACP,MAAM,CACT,CAAC,CAAC,CAAC,CACA,uBAAC,oBAAS,IACN,IAAI,EAAE,IAAI,EACV,YAAY,EAAE,MAAM,EACpB,KAAK,EAAE,UAAU,EACjB,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAC9C,MAAM,EAAE,eAAe,GACzB,CACL,GACC,GACJ,CACT,CAAC;AACN,CAAC,CACJ,CAAC;AAEF,oBAAY,CAAC,WAAW,GAAG,cAAc,CAAC","sourcesContent":["import * as React from 'react';\n\nimport {hsvaToRgbaString} from '@uiw/react-color';\nimport type {HsvaColor} from '@uiw/react-color';\n\nimport {TextInput} from '../../../../controls';\nimport {b} from '../../constants';\nimport {Modes} from '../../types';\nimport {convertSelectedModeColorToHsva, getTextValueByMode} from '../../utils';\n\ntype ColorDisplayProps = {\n    hsva: HsvaColor;\n    withAlpha: boolean;\n    size?: 's' | 'm' | 'l' | 'xl';\n    compact?: boolean;\n    onClick: () => void;\n    onColorChange?: (color: HsvaColor) => void;\n};\nexport const ColorDisplay = React.forwardRef<HTMLDivElement, ColorDisplayProps>(\n    ({hsva, withAlpha, size = 'm', compact, onClick, onColorChange}, ref) => {\n        const [inputValue, setInputValue] = React.useState(() =>\n            getTextValueByMode(hsva, Modes.Hex, withAlpha),\n        );\n\n        React.useEffect(() => {\n            setInputValue(getTextValueByMode(hsva, Modes.Hex, withAlpha));\n        }, [hsva, withAlpha]);\n\n        const handleInputBlur = React.useCallback(() => {\n            try {\n                const newHsva = convertSelectedModeColorToHsva(inputValue, Modes.Hex, withAlpha);\n\n                onColorChange?.(newHsva);\n            } catch {\n                setInputValue(getTextValueByMode(hsva, Modes.Hex, withAlpha));\n            }\n        }, [inputValue, withAlpha, onColorChange, hsva]);\n\n        const swatch = (\n            <button\n                type=\"button\"\n                className={b('color-swatch', {size})}\n                onClick={onClick}\n                style={{backgroundColor: hsvaToRgbaString(hsva)}}\n            />\n        );\n\n        return (\n            <div className={b('picker-wrapper', {compact, size, alpha: withAlpha})} ref={ref}>\n                <div className={b('picker-handlers')}>\n                    {compact ? (\n                        swatch\n                    ) : (\n                        <TextInput\n                            size={size}\n                            startContent={swatch}\n                            value={inputValue}\n                            onChange={(e) => setInputValue(e.target.value)}\n                            onBlur={handleInputBlur}\n                        />\n                    )}\n                </div>\n            </div>\n        );\n    },\n);\n\nColorDisplay.displayName = 'ColorDisplay';\n"]}