{"version":3,"file":"BreadcrumbsDropdownMenu.js","sourceRoot":"../../../../src","sources":["components/Breadcrumbs/BreadcrumbsDropdownMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport {\n    useClick,\n    useDismiss,\n    useFloatingRootContext,\n    useInteractions,\n    useListNavigation,\n    useRole,\n} from '@floating-ui/react';\nimport type {UseInteractionsReturn} from '@floating-ui/react';\n\nimport {Button} from '../Button';\nimport {Popup} from '../Popup';\nimport type {PopupPlacement} from '../Popup';\n\nimport i18n from './i18n';\nimport {b} from './utils';\n\ninterface DropdownMenuProps {\n    children: React.ReactNode;\n    disabled?: boolean;\n    popupPlacement?: PopupPlacement;\n    popupStyle?: 'staircase';\n}\n\ninterface MenuContext {\n    isMenu: boolean;\n    activeIndex: null | number;\n    getItemProps: UseInteractionsReturn['getItemProps'];\n    listItemsRef: {current: Array<HTMLElement | null>};\n    popupStyle: undefined | 'staircase';\n}\n\nconst menuContext = React.createContext<MenuContext>({\n    isMenu: false,\n    activeIndex: null as null | number,\n    getItemProps: (props = {}) => props,\n    listItemsRef: {current: []},\n    popupStyle: undefined,\n});\n\nexport function BreadcrumbsDropdownMenu({\n    children,\n    disabled,\n    popupPlacement,\n    popupStyle,\n}: DropdownMenuProps) {\n    const [reference, setReference] = React.useState<HTMLButtonElement | null>(null);\n    const [floating, setFloating] = React.useState<HTMLDivElement | null>(null);\n    const [activeIndex, setActiveIndex] = React.useState<number | null>(null);\n    const [open, setOpen] = React.useState(false);\n\n    const context = useFloatingRootContext({\n        open,\n        onOpenChange: setOpen,\n        elements: {reference, floating},\n    });\n\n    const listItemsRef = React.useRef<Array<HTMLElement | null>>([]);\n\n    const listNavigation = useListNavigation(context, {\n        enabled: !disabled,\n        listRef: listItemsRef,\n        activeIndex,\n        onNavigate: setActiveIndex,\n        loop: true,\n    });\n\n    const dismiss = useDismiss(context, {enabled: !disabled});\n    const click = useClick(context, {enabled: !disabled});\n    const role = useRole(context, {role: 'menu'});\n\n    const interactions = [click, dismiss, listNavigation, role];\n    const {getReferenceProps, getItemProps} = useInteractions(interactions);\n\n    const {t} = i18n.useTranslation();\n\n    return (\n        <div className={b('menu')}>\n            <Button\n                ref={setReference}\n                {...getReferenceProps()}\n                title={t('label_more')}\n                aria-label={t('label_more')}\n                size=\"s\"\n                view=\"flat\"\n                disabled={disabled}\n            >\n                <Button.Icon>...</Button.Icon>\n            </Button>\n            <Popup\n                floatingContext={context}\n                floatingRef={setFloating}\n                floatingInteractions={interactions}\n                placement={popupPlacement}\n                className={b('menu-popup')}\n            >\n                <menuContext.Provider\n                    value={{isMenu: true, getItemProps, listItemsRef, activeIndex, popupStyle}}\n                >\n                    {children}\n                </menuContext.Provider>\n            </Popup>\n        </div>\n    );\n}\n\nexport function useMenuContext() {\n    return React.useContext(menuContext);\n}\n"]}