{"version":3,"file":"EventEmitter.js","sourceRoot":"../../../../src","sources":["utils/EventEmitter/EventEmitter.ts"],"names":[],"mappings":"AAEA;;;;;;;;;;;;;;;;GAgBG;AACH,MAAM,OAAO,YAAY;IACb,SAAS,CAAoB;IAErC;QACI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,OAAO;QACH,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,SAAS,CAAwB,KAAY,EAAE,QAAqC;QAChF,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE,CAAC;YACjC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC3E,CAAC;QAED,OAAO,GAAG,EAAE;YACR,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,MAAM,CACjD,CAAC,eAAe,EAAE,EAAE,CAAC,QAAQ,KAAK,eAAe,CACpD,CAAC;QACN,CAAC,CAAC;IACN,CAAC;IAED,MAAM,CAAwB,KAAY,EAAE,IAAc;QACtD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,CAAC;YACjC,OAAO,KAAK,CAAC;QACjB,CAAC;QAED,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;YAC3C,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC;QACtB,CAAC;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ","sourcesContent":["import type {EventListeners} from './types';\n\n/**\n * Class for emitting events\n * @example\n * import {EventEmitter} from '@gravity-ui/uikit';\n *\n * const emitter = new EventEmitter<{\n *   foobar: [string, number]\n * }>();\n *\n * emitter.notify('foobar', ['foo', 0]); // returns \"false\", because there is no attached listeners yet\n *\n * const unsubscribe = emitter.subscribe('foobar', (a, b) => {\n *   console.log(a, b);\n * });\n *\n * emitter.notify('foobar', ['foo', 1]); // returns \"true\", because listener is appeared\n */\nexport class EventEmitter<T extends Record<string, unknown[]>> {\n    private listeners: EventListeners<T>;\n\n    constructor() {\n        this.listeners = {};\n    }\n\n    destroy() {\n        this.listeners = {};\n    }\n\n    subscribe<Event extends keyof T>(event: Event, listener: (...args: T[Event]) => void) {\n        if (typeof listener === 'function') {\n            this.listeners[event] = (this.listeners[event] || []).concat(listener);\n        }\n\n        return () => {\n            this.listeners[event] = this.listeners[event]?.filter(\n                (currentListener) => listener !== currentListener,\n            );\n        };\n    }\n\n    notify<Event extends keyof T>(event: Event, data: T[Event]) {\n        if (!this.listeners[event]?.length) {\n            return false;\n        }\n\n        for (const listener of this.listeners[event]) {\n            listener(...data);\n        }\n\n        return true;\n    }\n}\n"]}