{"version":3,"file":"TreeList.js","sourceRoot":"../../../../src","sources":["components/TreeList/TreeList.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,OAAO,EAAC,SAAS,EAAC,6BAAoB;AACtC,OAAO,EACH,aAAa,EACb,YAAY,EACZ,kBAAkB,EAClB,uBAAuB,EACvB,cAAc,GACjB,4BAAmB;AAEpB,OAAO,EAAC,KAAK,EAAC,uBAAoB;AAIlC,MAAM,CAAC,GAAG,KAAK,CAAC,WAAW,CAAC,CAAC;AAE7B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAuB,EAC3C,EAAE,EACF,EAAE,EACF,IAAI,GAAG,GAAG,EACV,SAAS,EACT,IAAI,EACJ,QAAQ,EACR,YAAY,EAAE,iBAAiB,EAC/B,UAAU,EAAE,eAAe,EAC3B,eAAe,GAAG,aAAa,EAC/B,WAAW,EAAE,gBAAgB,EAC7B,yBAAyB,GACP,EAAE,EAAE;IACtB,MAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IAC3B,MAAM,UAAU,GAAG,EAAE,IAAI,MAAM,CAAC;IAChC,MAAM,iBAAiB,GAAG,KAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;IAC7D,MAAM,YAAY,GAAG,iBAAiB,IAAI,iBAAiB,CAAC;IAE5D,MAAM,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE;QACnC,IAAI,gBAAgB,KAAK,IAAI,EAAE,CAAC;YAC5B,OAAO,SAAS,CAAC;QACrB,CAAC;QAED,MAAM,OAAO,GAAoB,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE;YACxC,MAAM,OAAO,GAAG,EAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,IAAI,EAAC,CAAC;YAEnC,IAAI,gBAAgB,EAAE,CAAC;gBACnB,gBAAgB,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YACnC,CAAC;iBAAM,CAAC;gBACJ,MAAM,WAAW,GAAG,uBAAuB,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;gBAE9D,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAC5B,CAAC;QACL,CAAC,CAAC;QAEF,OAAO,OAAO,CAAC;IACnB,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEvC,cAAc,CAAC;QACX,YAAY;QACZ,WAAW;QACX,IAAI;KACP,CAAC,CAAC;IAEH,MAAM,UAAU,GAA+C,CAC3D,MAAM,EACN,KAAK,EACL,oBAAoB,EACtB,EAAE;QACA,MAAM,WAAW,GAAG,kBAAkB,CAAI;YACtC,EAAE;YACF,EAAE,EAAE,MAAM;YACV,IAAI;YACJ,QAAQ;YACR,yBAAyB;YACzB,WAAW;YACX,IAAI;SACP,CAAC,CAAC;QAEH,IAAI,eAAe,EAAE,CAAC;YAClB,OAAO,eAAe,CAAC;gBACnB,EAAE,EAAE,MAAM;gBACV,IAAI,EAAE,WAAW,CAAC,IAAI;gBACtB,KAAK,EAAE,WAAW,CAAC,KAAK;gBACxB,OAAO,EAAE,WAAW,CAAC,OAAO;gBAC5B,KAAK;gBACL,oBAAoB;gBACpB,IAAI;aACP,CAAC,CAAC;QACP,CAAC;QAED,OAAO,KAAC,YAAY,OAAK,WAAW,CAAC,KAAK,KAAM,oBAAoB,GAAI,CAAC;IAC7E,CAAC,CAAC;IAEF,iEAAiE;IACjE,OAAO,eAAe,CAAC;QACnB,EAAE;QACF,EAAE,EAAE,QAAQ,UAAU,EAAE;QACxB,IAAI;QACJ,YAAY;QACZ,SAAS,EAAE,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC;QAC7B,IAAI;QACJ,UAAU;KACb,CAAC,CAAC;AACP,CAAC,CAAC","sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport {useUniqId} from '../../hooks';\nimport {\n    ListContainer,\n    ListItemView,\n    getItemRenderState,\n    getListItemClickHandler,\n    useListKeydown,\n} from '../useList';\nimport type {ListOnItemClick} from '../useList';\nimport {block} from '../utils/cn';\n\nimport type {TreeListContainerProps, TreeListProps} from './types';\n\nconst b = block('tree-list');\n\nexport const TreeList = <T, P extends {} = {}>({\n    qa,\n    id,\n    size = 'm',\n    className,\n    list,\n    multiple,\n    containerRef: propsContainerRef,\n    renderItem: propsRenderItem,\n    renderContainer = ListContainer,\n    onItemClick: propsOnItemClick,\n    mapItemDataToContentProps,\n}: TreeListProps<T, P>) => {\n    const uniqId = useUniqId();\n    const treeListId = id ?? uniqId;\n    const containerRefLocal = React.useRef<HTMLDivElement>(null);\n    const containerRef = propsContainerRef ?? containerRefLocal;\n\n    const onItemClick = React.useMemo(() => {\n        if (propsOnItemClick === null) {\n            return undefined;\n        }\n\n        const handler: ListOnItemClick = (arg, e) => {\n            const payload = {id: arg.id, list};\n\n            if (propsOnItemClick) {\n                propsOnItemClick?.(payload, e);\n            } else {\n                const baseOnClick = getListItemClickHandler({list, multiple});\n\n                baseOnClick(payload, e);\n            }\n        };\n\n        return handler;\n    }, [propsOnItemClick, list, multiple]);\n\n    useListKeydown({\n        containerRef,\n        onItemClick,\n        list,\n    });\n\n    const renderItem: TreeListContainerProps<T, P>['renderItem'] = (\n        itemId,\n        index,\n        renderContainerProps,\n    ) => {\n        const renderState = getItemRenderState<T>({\n            qa,\n            id: itemId,\n            size,\n            multiple,\n            mapItemDataToContentProps,\n            onItemClick,\n            list,\n        });\n\n        if (propsRenderItem) {\n            return propsRenderItem({\n                id: itemId,\n                data: renderState.data,\n                props: renderState.props,\n                context: renderState.context,\n                index,\n                renderContainerProps,\n                list,\n            });\n        }\n\n        return <ListItemView {...renderState.props} {...renderContainerProps} />;\n    };\n\n    // not JSX decl here is from weird `@hello-pangea/dnd` render bug\n    return renderContainer({\n        qa,\n        id: `list-${treeListId}`,\n        size,\n        containerRef,\n        className: b(null, className),\n        list,\n        renderItem,\n    });\n};\n"]}