{"version":3,"file":"copyText.js","sourceRoot":"../../../../src","sources":["components/CopyToClipboard/copyText.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;GAuBG;AACH,MAAM,UAAU,QAAQ,CAAC,IAAY;IACjC,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,CAAC,SAAS,EAAE,SAAS,EAAE,CAAC;QACrE,IAAI,CAAC;YACD,OAAO,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC/C,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACb,OAAO,OAAO,QAAQ,KAAK,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;QAC5F,CAAC;IACL,CAAC;IAED,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,CAAC;QAClC,OAAO,gBAAgB,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC,CAAC;AAC9F,CAAC;AAED,KAAK,UAAU,gBAAgB,CAAC,IAAY;IACxC,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC;IAE7C,IAAI,CAAC;QACD,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QACpD,oCAAoC;QACpC,QAAQ,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAC7C,qCAAqC;QACrC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,CAAC;QAC7B,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACrC,QAAQ,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC;QAC9B,kCAAkC;QAClC,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC;QAClC,gDAAgD;QAChD,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;QACnC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;QACtB,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC/B,QAAQ,CAAC,MAAM,EAAE,CAAC;QAClB,MAAM,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAE7C,IAAI,CAAC,OAAO,EAAE,CAAC;YACX,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;QAC7E,CAAC;QAED,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IACxC,CAAC;YAAS,CAAC;QACP,kDAAkD;QAClD,IACI,aAAa;YACb,OAAO,IAAI,aAAa;YACxB,OAAO,aAAa,CAAC,KAAK,KAAK,UAAU,EAC3C,CAAC;YACC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC1B,CAAC;IACL,CAAC;AACL,CAAC","sourcesContent":["/**\n * Copies text to the browser's clipboard.\n * Uses the modern `navigator.clipboard` API, with a fallback to `document.execCommand` when unavailable.\n *\n * @param {string} text Text to copy to the clipboard\n * @returns {Promise<void>} Promise that resolves on successful copy or rejects on error\n * @throws {Error} Throws an error if neither `navigator.clipboard` nor `document` is available\n *\n * @example\n * ```typescript\n * // Copy simple text\n * copyText('Hello, World!')\n *   .then(() => console.log('Text copied'))\n *   .catch(error => console.error('Copy error:', error));\n *\n * // Using with async/await\n * try {\n *   await copyText('Text to copy');\n *   console.log('Successfully copied');\n * } catch (error) {\n *   console.error('Failed to copy:', error);\n * }\n * ```\n */\nexport function copyText(text: string) {\n    if (typeof navigator !== 'undefined' && navigator.clipboard?.writeText) {\n        try {\n            return navigator.clipboard.writeText(text);\n        } catch (error) {\n            return typeof document === 'undefined' ? Promise.reject(error) : copyTextFallback(text);\n        }\n    }\n\n    if (typeof document !== 'undefined') {\n        return copyTextFallback(text);\n    }\n\n    return Promise.reject(new Error('Neither navigator.clipboard nor document is available'));\n}\n\nasync function copyTextFallback(text: string) {\n    const activeElement = document.activeElement;\n\n    try {\n        const textarea = document.createElement('textarea');\n        // Make invisible for screen readers\n        textarea.setAttribute('aria-hidden', 'true');\n        // Reset possible styles for textarea\n        textarea.style.all = 'unset';\n        textarea.style.position = 'absolute';\n        textarea.style.left = '1000%';\n        // Preserve spaces and line breaks\n        textarea.style.whiteSpace = 'pre';\n        // Do not inherit user-select (it may be `none`)\n        textarea.style.userSelect = 'text';\n        textarea.value = text;\n        document.body.append(textarea);\n        textarea.select();\n        const success = document.execCommand('copy');\n\n        if (!success) {\n            throw new Error('Failed to copy text with document.execCommand(\"copy\")');\n        }\n\n        document.body.removeChild(textarea);\n    } finally {\n        // Restore focus to the previously focused element\n        if (\n            activeElement &&\n            'focus' in activeElement &&\n            typeof activeElement.focus === 'function'\n        ) {\n            activeElement.focus();\n        }\n    }\n}\n"]}