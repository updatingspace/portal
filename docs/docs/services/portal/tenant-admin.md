---
sidebar_position: 3
title: Tenant Admin Portal
description: Управление ролями, правами и аудитом внутри tenant
---

# Tenant Admin Portal

Tenant Admin Portal — интерфейс внутри портала, где администратор тенанта управляет ролями, назначениями и аудитом.

## Доступ

Права доступа к экрану:

- `portal.roles.read` — просмотр ролей и назначений.
- `portal.roles.write` — создание и изменение ролей.
- `portal.role_bindings.write` — назначение ролей участникам.

Доступ только через BFF (HTTP‑only cookies).

## Основные разделы

### 1) Участники

**Что можно:**
- Найти участника по имени, ID или роли (поиск сопоставляет и роль тоже, например «Модератор»).
- Посмотреть текущие назначения выбранного человека (scope отображается сразу).
- Назначить новую роль и удалить назначение.
- Быстро проверить по роли: отдельный поиск по названиям ролей показывает список участников с этой ролью.

**Поддерживаемые scope:**
- `TENANT` — по умолчанию, `scope_id` равен текущему tenant.
- `COMMUNITY` / `TEAM` / `SERVICE` — укажите `scope_id` вручную.
- `GLOBAL` — используется для глобальных назначений (редко).

### 2) Роли

**Что можно:**
- Создать роль (tenant‑specific).
- Клонировать системный шаблон и адаптировать под тенант.
- Отфильтровать роли по сервису и типу (tenant / шаблоны).
- Проверить состав прав (сводка прав отображается сразу).

### 3) Права

**Что можно:**
- Просмотреть каталог permission‑ключей по сервисам.
- Быстро найти ключ по имени или описанию.
- Использовать список при настройке ролей.

### 4) Журнал

**Что можно:**
- Сфокусироваться на последних изменениях (назначения, роли).
- Быстро найти событие по действию, пользователю или роли.
- Использовать фильтр по action и метаданным.

## Типовые сценарии

### Сценарий 1. Назначить роль участнику

1. Откройте **Tenant Admin → Участники**.
2. Введите имя или роль, чтобы найти пользователя.
3. Выберите пользователя в списке.
4. В блоке «Назначить новую роль» выберите роль и scope.
5. Нажмите «Назначить роль».
6. Проверьте, что назначение появилось в списке и в журнале.

### Сценарий 2. Создать роль для нового модуля

1. Откройте **Tenant Admin → Роли и права**.
2. Нажмите «Создать роль».
3. Укажите сервис и имя роли.
4. Выберите права из каталога (можно фильтровать внутри селекта).
5. Сохраните роль.
6. Перейдите в «Участники» и назначьте роль нужным людям.

### Сценарий 3. Быстрый поиск модераторов

1. Перейдите в раздел **Участники**.
2. Введите «модератор» в поле поиска.
3. Список покажет всех пользователей, у которых есть роли с совпадающим названием.

### Сценарий 4. Просмотреть каталог прав

1. Откройте **Tenant Admin → Права**.
2. Введите ключ или описание в поиск.
3. При необходимости выберите сервис для фильтрации.
4. Используйте нужные ключи при создании/редактировании роли.

### Сценарий 5. Проверить историю изменений

1. Откройте **Tenant Admin → Журнал**.
2. Введите в поиск «role_updated» или ID пользователя.
3. Просмотрите карточки событий и метаданные.

## Замечания

- Вся работа с правами проходит через Access Service, UI не хранит токены.
- В журнале сохраняются только последние события (пагинация может быть добавлена позже).
- Если пользователь отсутствует в списке профилей, назначение всё равно возможно по `user_id`.
